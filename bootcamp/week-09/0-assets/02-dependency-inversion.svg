<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <style>
      .bg { fill: #1a1a2e; }
      .title { fill: #ffffff; font-family: system-ui, sans-serif; font-size: 24px; font-weight: bold; }
      .subtitle { fill: #a0a0a0; font-family: system-ui, sans-serif; font-size: 14px; }
      .label { fill: #ffffff; font-family: system-ui, sans-serif; font-size: 12px; font-weight: 500; }
      .label-sm { fill: #b0b0b0; font-family: system-ui, sans-serif; font-size: 10px; }
      .code { fill: #00bcd4; font-family: monospace; font-size: 11px; }
      .bad { fill: #f44336; }
      .good { fill: #4caf50; }
      .abstraction { fill: #ff9800; }
      .concrete { fill: #7c4dff; }
      .high-level { fill: #009688; }
      .low-level { fill: #455a64; }
      .arrow { stroke: #ffffff; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-bad { stroke: #f44336; stroke-width: 2; fill: none; marker-end: url(#arrowhead-bad); }
      .arrow-good { stroke: #4caf50; stroke-width: 2; fill: none; marker-end: url(#arrowhead-good); }
      .dashed { stroke-dasharray: 5,5; }
      .box-stroke { stroke: #4a4a6a; stroke-width: 2; fill: none; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff"/>
    </marker>
    <marker id="arrowhead-bad" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f44336"/>
    </marker>
    <marker id="arrowhead-good" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect class="bg" width="800" height="500"/>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" class="title">Dependency Inversion Principle (DIP)</text>
  <text x="400" y="55" text-anchor="middle" class="subtitle">High-level modules should not depend on low-level modules</text>
  
  <!-- Left Side: WITHOUT DIP -->
  <rect x="40" y="80" width="340" height="380" rx="8" class="box-stroke"/>
  <rect x="40" y="80" width="340" height="30" rx="8" class="bad"/>
  <text x="210" y="100" text-anchor="middle" class="label">❌ WITHOUT DIP (Acoplado)</text>
  
  <!-- High-level module -->
  <rect x="130" y="130" width="160" height="70" rx="6" class="high-level"/>
  <text x="210" y="158" text-anchor="middle" class="label">NotificationService</text>
  <text x="210" y="178" text-anchor="middle" class="code">class Service:</text>
  <text x="210" y="190" text-anchor="middle" class="code">  repo = MySQLRepo()</text>
  
  <!-- Arrow down (bad - direct dependency) -->
  <path d="M210 200 L210 240" class="arrow-bad"/>
  <text x="250" y="225" class="label-sm" fill="#f44336">depends on</text>
  
  <!-- Low-level module -->
  <rect x="130" y="245" width="160" height="70" rx="6" class="low-level"/>
  <text x="210" y="275" text-anchor="middle" class="label">MySQLRepository</text>
  <text x="210" y="295" text-anchor="middle" class="code">Concrete Class</text>
  
  <!-- Problems -->
  <text x="60" y="350" class="label-sm" fill="#f44336">Problemas:</text>
  <text x="60" y="370" class="label-sm">• No se puede cambiar BD fácilmente</text>
  <text x="60" y="390" class="label-sm">• Difícil de testear (necesita BD real)</text>
  <text x="60" y="410" class="label-sm">• Alto acoplamiento</text>
  <text x="60" y="430" class="label-sm">• Viola Open/Closed Principle</text>
  
  <!-- Right Side: WITH DIP -->
  <rect x="420" y="80" width="340" height="380" rx="8" class="box-stroke"/>
  <rect x="420" y="80" width="340" height="30" rx="8" class="good"/>
  <text x="590" y="100" text-anchor="middle" class="label">✅ WITH DIP (Desacoplado)</text>
  
  <!-- High-level module -->
  <rect x="510" y="130" width="160" height="70" rx="6" class="high-level"/>
  <text x="590" y="158" text-anchor="middle" class="label">NotificationService</text>
  <text x="590" y="178" text-anchor="middle" class="code">class Service:</text>
  <text x="590" y="190" text-anchor="middle" class="code">  repo: Repository</text>
  
  <!-- Arrow to abstraction (good) -->
  <path d="M590 200 L590 240" class="arrow-good"/>
  <text x="625" y="225" class="label-sm" fill="#4caf50">depends on</text>
  
  <!-- Abstraction (Protocol/Interface) -->
  <rect x="510" y="245" width="160" height="50" rx="6" class="abstraction"/>
  <text x="590" y="268" text-anchor="middle" class="label">Repository</text>
  <text x="590" y="285" text-anchor="middle" class="code">Protocol (Port)</text>
  
  <!-- Arrow from concrete to abstraction -->
  <path d="M590 340 L590 300" class="arrow-good dashed"/>
  <text x="625" y="325" class="label-sm" fill="#4caf50">implements</text>
  
  <!-- Low-level module -->
  <rect x="440" y="345" width="130" height="55" rx="6" class="concrete"/>
  <text x="505" y="370" text-anchor="middle" class="label">MySQLRepo</text>
  <text x="505" y="387" text-anchor="middle" class="code">Adapter</text>
  
  <rect x="590" y="345" width="130" height="55" rx="6" class="concrete"/>
  <text x="655" y="370" text-anchor="middle" class="label">FakeRepo</text>
  <text x="655" y="387" text-anchor="middle" class="code">Test Adapter</text>
  
  <!-- Arrows from implementations -->
  <path d="M505 345 L560 300" class="arrow-good dashed"/>
  <path d="M655 345 L620 300" class="arrow-good dashed"/>
  
  <!-- Benefits -->
  <text x="440" y="420" class="label-sm" fill="#4caf50">Beneficios:</text>
  <text x="440" y="440" class="label-sm">• Fácil cambiar implementaciones</text>
  <text x="440" y="455" class="label-sm">• Testing con fakes/mocks</text>
  
  <!-- Legend at bottom -->
  <rect x="150" y="470" width="12" height="12" class="high-level"/>
  <text x="168" y="480" class="label-sm">High-level</text>
  
  <rect x="270" y="470" width="12" height="12" class="abstraction"/>
  <text x="288" y="480" class="label-sm">Abstraction</text>
  
  <rect x="390" y="470" width="12" height="12" class="concrete"/>
  <text x="408" y="480" class="label-sm">Implementation</text>
  
  <rect x="530" y="470" width="12" height="12" class="low-level"/>
  <text x="548" y="480" class="label-sm">Low-level</text>
</svg>