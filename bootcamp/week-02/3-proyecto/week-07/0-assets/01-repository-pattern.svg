<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#009688"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="500" fill="#1a1a2e"/>
  
  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" fill="#009688" font-family="Inter, sans-serif" font-size="24" font-weight="bold">Repository Pattern</text>
  <text x="400" y="65" text-anchor="middle" fill="#888" font-family="Inter, sans-serif" font-size="14">Separación entre lógica de negocio y acceso a datos</text>
  
  <!-- Application Layer -->
  <rect x="50" y="100" width="200" height="120" rx="8" fill="#2d2d44" stroke="#009688" stroke-width="2"/>
  <text x="150" y="130" text-anchor="middle" fill="#009688" font-family="Inter, sans-serif" font-size="14" font-weight="bold">Application Layer</text>
  <text x="150" y="160" text-anchor="middle" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">UserService</text>
  <text x="150" y="180" text-anchor="middle" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">TaskService</text>
  <text x="150" y="200" text-anchor="middle" fill="#888" font-family="Inter, sans-serif" font-size="11">(Lógica de negocio)</text>
  
  <!-- Repository Interface -->
  <rect x="300" y="100" width="200" height="120" rx="8" fill="#2d2d44" stroke="#4fc3f7" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="400" y="130" text-anchor="middle" fill="#4fc3f7" font-family="Inter, sans-serif" font-size="14" font-weight="bold">Repository Interface</text>
  <text x="400" y="160" text-anchor="middle" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">IUserRepository</text>
  <text x="400" y="180" text-anchor="middle" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">ITaskRepository</text>
  <text x="400" y="200" text-anchor="middle" fill="#888" font-family="Inter, sans-serif" font-size="11">(Contrato/Abstracción)</text>
  
  <!-- Repository Implementation -->
  <rect x="550" y="100" width="200" height="120" rx="8" fill="#2d2d44" stroke="#81c784" stroke-width="2"/>
  <text x="650" y="130" text-anchor="middle" fill="#81c784" font-family="Inter, sans-serif" font-size="14" font-weight="bold">Repository Impl</text>
  <text x="650" y="160" text-anchor="middle" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">SQLUserRepository</text>
  <text x="650" y="180" text-anchor="middle" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">SQLTaskRepository</text>
  <text x="650" y="200" text-anchor="middle" fill="#888" font-family="Inter, sans-serif" font-size="11">(SQLAlchemy)</text>
  
  <!-- Arrows -->
  <line x1="250" y1="160" x2="295" y2="160" stroke="#009688" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="272" y="150" text-anchor="middle" fill="#888" font-family="Inter, sans-serif" font-size="10">usa</text>
  
  <line x1="500" y1="160" x2="545" y2="160" stroke="#4fc3f7" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="522" y="150" text-anchor="middle" fill="#888" font-family="Inter, sans-serif" font-size="10">implementa</text>
  
  <!-- Database -->
  <ellipse cx="650" cy="320" rx="80" ry="40" fill="#2d2d44" stroke="#ff9800" stroke-width="2"/>
  <text x="650" y="325" text-anchor="middle" fill="#ff9800" font-family="Inter, sans-serif" font-size="14" font-weight="bold">Database</text>
  
  <!-- Arrow to DB -->
  <line x1="650" y1="225" x2="650" y2="275" stroke="#81c784" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="670" y="255" fill="#888" font-family="Inter, sans-serif" font-size="10">SQL</text>
  
  <!-- Benefits Box -->
  <rect x="50" y="280" width="350" height="180" rx="8" fill="#252538" stroke="#444" stroke-width="1"/>
  <text x="70" y="310" fill="#009688" font-family="Inter, sans-serif" font-size="14" font-weight="bold">✓ Beneficios</text>
  
  <text x="70" y="340" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">• Separa lógica de negocio del acceso a datos</text>
  <text x="70" y="365" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">• Facilita testing con Fake Repositories</text>
  <text x="70" y="390" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">• Permite cambiar DB sin modificar services</text>
  <text x="70" y="415" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">• Centraliza queries en un solo lugar</text>
  <text x="70" y="440" fill="#e0e0e0" font-family="Inter, sans-serif" font-size="12">• Código más limpio y mantenible</text>
  
  <!-- Code Example -->
  <rect x="420" y="380" width="350" height="90" rx="4" fill="#1e1e2e"/>
  <text x="440" y="405" fill="#888" font-family="monospace" font-size="11"># Service usa Repository, no Session</text>
  <text x="440" y="425" fill="#4fc3f7" font-family="monospace" font-size="11">class</text>
  <text x="475" y="425" fill="#81c784" font-family="monospace" font-size="11">UserService</text>
  <text x="553" y="425" fill="#e0e0e0" font-family="monospace" font-size="11">:</text>
  <text x="450" y="445" fill="#e0e0e0" font-family="monospace" font-size="11">def get_user(self, id):</text>
  <text x="460" y="465" fill="#e0e0e0" font-family="monospace" font-size="11">return self.</text>
  <text x="545" y="465" fill="#ff9800" font-family="monospace" font-size="11">repo</text>
  <text x="575" y="465" fill="#e0e0e0" font-family="monospace" font-size="11">.get_by_id(id)</text>
</svg>
