<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="500" fill="#0f172a"/>
  
  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="24" font-weight="bold">Response Model Flow</text>
  
  <!-- Client Box -->
  <rect x="50" y="100" width="120" height="60" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
  <text x="110" y="137" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Cliente</text>
  
  <!-- Arrow 1: Request -->
  <line x1="170" y1="130" x2="240" y2="130" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="205" y="118" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="11">Request</text>
  
  <!-- FastAPI Box -->
  <rect x="250" y="80" width="140" height="100" rx="8" fill="#1e293b" stroke="#10b981" stroke-width="2"/>
  <text x="320" y="115" text-anchor="middle" fill="#10b981" font-family="system-ui, sans-serif" font-size="14" font-weight="600">FastAPI</text>
  <text x="320" y="140" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="11">Endpoint</text>
  <text x="320" y="160" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="11">Handler</text>
  
  <!-- Arrow 2: To DB -->
  <line x1="390" y1="130" x2="460" y2="130" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="425" y="118" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="11">Query</text>
  
  <!-- Database Box -->
  <rect x="470" y="100" width="120" height="60" rx="8" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
  <text x="530" y="137" text-anchor="middle" fill="#f59e0b" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Database</text>
  
  <!-- Arrow 3: From DB -->
  <path d="M530 160 L530 200 L320 200" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="425" y="218" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="11">Raw Data (dict)</text>
  
  <!-- Response Model Section -->
  <rect x="170" y="250" width="460" height="180" rx="12" fill="#1e293b" stroke="#8b5cf6" stroke-width="2"/>
  <text x="400" y="280" text-anchor="middle" fill="#8b5cf6" font-family="system-ui, sans-serif" font-size="16" font-weight="bold">response_model Processing</text>
  
  <!-- Step 1 -->
  <rect x="190" y="300" width="110" height="50" rx="6" fill="#0f172a" stroke="#3b82f6" stroke-width="1"/>
  <text x="245" y="320" text-anchor="middle" fill="#3b82f6" font-family="system-ui, sans-serif" font-size="11" font-weight="600">1. Validaci√≥n</text>
  <text x="245" y="338" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Pydantic</text>
  
  <!-- Arrow -->
  <line x1="300" y1="325" x2="320" y2="325" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Step 2 -->
  <rect x="330" y="300" width="110" height="50" rx="6" fill="#0f172a" stroke="#10b981" stroke-width="1"/>
  <text x="385" y="320" text-anchor="middle" fill="#10b981" font-family="system-ui, sans-serif" font-size="11" font-weight="600">2. Filtrado</text>
  <text x="385" y="338" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">exclude_unset</text>
  
  <!-- Arrow -->
  <line x1="440" y1="325" x2="460" y2="325" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Step 3 -->
  <rect x="470" y="300" width="100" height="50" rx="6" fill="#0f172a" stroke="#f59e0b" stroke-width="1"/>
  <text x="520" y="320" text-anchor="middle" fill="#f59e0b" font-family="system-ui, sans-serif" font-size="11" font-weight="600">3. JSON</text>
  <text x="520" y="338" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Serialize</text>
  
  <!-- Options -->
  <text x="400" y="385" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="9">Opciones: response_model_exclude, response_model_include, response_model_by_alias</text>
  <text x="400" y="402" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="9">Beneficio: Ocultar campos sensibles (password, internal_id, etc.)</text>
  
  <!-- Arrow 4: Final Response -->
  <path d="M170 340 L110 340 L110 160" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="80" y="270" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="11" transform="rotate(-90 80 270)">Response JSON</text>
  
  <!-- Legend -->
  <rect x="630" y="100" width="150" height="120" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="705" y="125" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="12" font-weight="600">Leyenda</text>
  
  <rect x="645" y="140" width="12" height="12" fill="#3b82f6"/>
  <text x="665" y="150" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Cliente/Entrada</text>
  
  <rect x="645" y="160" width="12" height="12" fill="#10b981"/>
  <text x="665" y="170" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">FastAPI/Flujo</text>
  
  <rect x="645" y="180" width="12" height="12" fill="#8b5cf6"/>
  <text x="665" y="190" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Procesamiento</text>
  
  <rect x="645" y="200" width="12" height="12" fill="#f59e0b"/>
  <text x="665" y="210" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Datos/Output</text>
  
  <!-- Footer -->
  <text x="400" y="480" text-anchor="middle" fill="#475569" font-family="system-ui, sans-serif" font-size="11">Semana 04 - Responses y Manejo de Errores</text>
</svg>
