<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 550">
  <defs>
    <style>
      .bg { fill: #1a1a2e; }
      .title { fill: #ffffff; font-family: Inter, sans-serif; font-size: 22px; font-weight: bold; }
      .subtitle { fill: #8892b0; font-family: Inter, sans-serif; font-size: 14px; }
      .box { stroke-width: 2; rx: 8; ry: 8; }
      .request-box { fill: #16213e; stroke: #3b82f6; }
      .fastapi-box { fill: #16213e; stroke: #10b981; }
      .function-box { fill: #16213e; stroke: #f59e0b; }
      .label { fill: #ffffff; font-family: Inter, sans-serif; font-size: 14px; font-weight: bold; }
      .code { fill: #e2e8f0; font-family: monospace; font-size: 11px; }
      .desc { fill: #94a3b8; font-family: Inter, sans-serif; font-size: 11px; }
      .arrow { stroke: #64748b; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .path-color { fill: #ec4899; }
      .query-color { fill: #8b5cf6; }
      .body-color { fill: #f59e0b; }
      .header-color { fill: #14b8a6; }
      .cookie-color { fill: #f97316; }
      .param-box { rx: 4; ry: 4; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect class="bg" width="900" height="550"/>
  
  <!-- Title -->
  <text class="title" x="450" y="35" text-anchor="middle">Flujo de Parámetros en FastAPI</text>
  <text class="subtitle" x="450" y="55" text-anchor="middle">Cómo FastAPI extrae y valida parámetros de diferentes fuentes</text>
  
  <!-- HTTP Request -->
  <g transform="translate(40, 80)">
    <rect class="box request-box" width="240" height="280"/>
    <text class="label" x="120" y="25" text-anchor="middle" fill="#3b82f6">HTTP Request</text>
    
    <!-- URL -->
    <text class="desc" x="15" y="50">URL:</text>
    <text class="code" x="15" y="68">/products/123?limit=10</text>
    
    <!-- Path Params -->
    <rect class="param-box path-color" x="15" y="85" width="210" height="35" opacity="0.2"/>
    <text class="label path-color" x="20" y="102" font-size="11">Path Parameters</text>
    <text class="code" x="20" y="115">{id: 123}</text>
    
    <!-- Query Params -->
    <rect class="param-box query-color" x="15" y="125" width="210" height="35" opacity="0.2"/>
    <text class="label query-color" x="20" y="142" font-size="11">Query Parameters</text>
    <text class="code" x="20" y="155">?limit=10&amp;skip=0</text>
    
    <!-- Body -->
    <rect class="param-box body-color" x="15" y="165" width="210" height="35" opacity="0.2"/>
    <text class="label body-color" x="20" y="182" font-size="11">Request Body</text>
    <text class="code" x="20" y="195">{"name": "Product"}</text>
    
    <!-- Headers -->
    <rect class="param-box header-color" x="15" y="205" width="210" height="35" opacity="0.2"/>
    <text class="label header-color" x="20" y="222" font-size="11">Headers</text>
    <text class="code" x="20" y="235">X-Token: abc123</text>
    
    <!-- Cookies -->
    <rect class="param-box cookie-color" x="15" y="245" width="210" height="25" opacity="0.2"/>
    <text class="label cookie-color" x="20" y="262" font-size="11">Cookies</text>
  </g>
  
  <!-- Arrow to FastAPI -->
  <path class="arrow" d="M290,220 L330,220"/>
  
  <!-- FastAPI Processing -->
  <g transform="translate(340, 80)">
    <rect class="box fastapi-box" width="220" height="280"/>
    <text class="label" x="110" y="25" text-anchor="middle" fill="#10b981">FastAPI</text>
    
    <text class="desc" x="15" y="50">Extracción automática:</text>
    
    <!-- Path() -->
    <g transform="translate(15, 60)">
      <rect class="param-box path-color" width="55" height="22" opacity="0.3"/>
      <text class="code path-color" x="5" y="15">Path()</text>
      <text class="code" x="65" y="15">→ Valida path params</text>
    </g>
    
    <!-- Query() -->
    <g transform="translate(15, 90)">
      <rect class="param-box query-color" width="60" height="22" opacity="0.3"/>
      <text class="code query-color" x="5" y="15">Query()</text>
      <text class="code" x="70" y="15">→ Valida query params</text>
    </g>
    
    <!-- Body() -->
    <g transform="translate(15, 120)">
      <rect class="param-box body-color" width="55" height="22" opacity="0.3"/>
      <text class="code body-color" x="5" y="15">Body()</text>
      <text class="code" x="65" y="15">→ Parsea JSON body</text>
    </g>
    
    <!-- Header() -->
    <g transform="translate(15, 150)">
      <rect class="param-box header-color" width="70" height="22" opacity="0.3"/>
      <text class="code header-color" x="5" y="15">Header()</text>
      <text class="code" x="80" y="15">→ Extrae headers</text>
    </g>
    
    <!-- Cookie() -->
    <g transform="translate(15, 180)">
      <rect class="param-box cookie-color" width="70" height="22" opacity="0.3"/>
      <text class="code cookie-color" x="5" y="15">Cookie()</text>
      <text class="code" x="80" y="15">→ Lee cookies</text>
    </g>
    
    <!-- Pydantic -->
    <rect fill="#16213e" stroke="#a855f7" stroke-width="1" x="15" y="215" width="190" height="50" rx="4"/>
    <text class="label" x="110" y="235" text-anchor="middle" fill="#a855f7" font-size="11">Pydantic Validation</text>
    <text class="code" x="110" y="252" text-anchor="middle">Type coercion + Constraints</text>
  </g>
  
  <!-- Arrow to Function -->
  <path class="arrow" d="M570,220 L610,220"/>
  
  <!-- Function Handler -->
  <g transform="translate(620, 80)">
    <rect class="box function-box" width="240" height="280"/>
    <text class="label" x="120" y="25" text-anchor="middle" fill="#f59e0b">Route Handler</text>
    
    <text class="code" x="15" y="55">@app.get("/products/{id}")</text>
    <text class="code" x="15" y="75">async def get_product(</text>
    <text class="code path-color" x="25" y="95">id: int = Path(...),</text>
    <text class="code query-color" x="25" y="115">limit: int = Query(10),</text>
    <text class="code body-color" x="25" y="135">data: Item = Body(...),</text>
    <text class="code header-color" x="25" y="155">token: str = Header(...),</text>
    <text class="code cookie-color" x="25" y="175">session: str = Cookie(None)</text>
    <text class="code" x="15" y="195">):</text>
    
    <text class="desc" x="120" y="225" text-anchor="middle">✅ Todos los parámetros</text>
    <text class="desc" x="120" y="242" text-anchor="middle">validados y tipados</text>
    
    <rect fill="#10b981" x="50" y="255" width="140" height="25" rx="4" opacity="0.3"/>
    <text class="label" x="120" y="272" text-anchor="middle" fill="#10b981" font-size="11">Listo para usar</text>
  </g>
  
  <!-- Legend -->
  <g transform="translate(40, 390)">
    <text class="subtitle" x="0" y="0">Tipos de Parámetros</text>
    
    <g transform="translate(0, 20)">
      <rect class="path-color" width="80" height="24" rx="4"/>
      <text class="label" x="40" y="17" text-anchor="middle" font-size="11">Path</text>
      <text class="desc" x="90" y="17">Identifica recursos: /items/{id}</text>
    </g>
    
    <g transform="translate(0, 50)">
      <rect class="query-color" width="80" height="24" rx="4"/>
      <text class="label" x="40" y="17" text-anchor="middle" font-size="11">Query</text>
      <text class="desc" x="90" y="17">Filtra/pagina: ?skip=0&amp;limit=10</text>
    </g>
    
    <g transform="translate(0, 80)">
      <rect class="body-color" width="80" height="24" rx="4"/>
      <text class="label" x="40" y="17" text-anchor="middle" font-size="11">Body</text>
      <text class="desc" x="90" y="17">Datos JSON para crear/actualizar</text>
    </g>
    
    <g transform="translate(400, 20)">
      <rect class="header-color" width="80" height="24" rx="4"/>
      <text class="label" x="40" y="17" text-anchor="middle" font-size="11">Header</text>
      <text class="desc" x="90" y="17">Metadata: Authorization, X-Token</text>
    </g>
    
    <g transform="translate(400, 50)">
      <rect class="cookie-color" width="80" height="24" rx="4"/>
      <text class="label" x="40" y="17" text-anchor="middle" font-size="11">Cookie</text>
      <text class="desc" x="90" y="17">Estado del cliente: session_id</text>
    </g>
  </g>
</svg>
